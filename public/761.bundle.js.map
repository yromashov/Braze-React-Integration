{"version":3,"file":"./public/761.bundle.js","mappings":"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","sources":["webpack://braze-web-sdk-tutorial/./node_modules/@braze/web-sdk/src/Push/push-manager.js","webpack://braze-web-sdk-tutorial/./node_modules/@braze/web-sdk/src/Push/push-manager-factory.js"],"sourcesContent":["import{isArray as p,isEqual as ii}from\"../util/code-utils.js\";import ei from\"../models/push-token.js\";import r from\"../../shared-lib/braze-shared-lib.js\";import{STORAGE_KEYS as o}from\"../managers/storage-manager.js\";import{User}from\"../User/index.js\";import{WindowUtils as G}from\"../util/window-utils.js\";export default class aa{constructor(i,e,t,s,n,r,o,u,h,a){this.Pe=i,this.We=e,this.Re=t,this.Ve=s+\"/safari/\"+e,this.Ye=n||\"/service-worker.js\",this.Ke=r,this.wt=o,this.Qe=u||!1,this.Xe=h||!1,this.h=a,this.Ze=\"serviceWorker\"in navigator&&\"undefined\"!=typeof ServiceWorkerRegistration&&\"showNotification\"in ServiceWorkerRegistration.prototype&&\"PushManager\"in window,this.hn=\"safari\"in window&&\"pushNotification\"in window.safari&&\"function\"==typeof window.safari.pushNotification.permission&&\"function\"==typeof window.safari.pushNotification.requestPermission}dn(){return this.Xe}isPushSupported(){return this.Ze||this.hn}isPushBlocked(){const i=this.isPushSupported()&&\"Notification\"in window&&null!=window.Notification&&null!=window.Notification.permission&&\"denied\"===window.Notification.permission,e=this.isPushSupported()&&(!(\"Notification\"in window)||null==window.Notification);return i||e}isPushPermissionGranted(){return this.isPushSupported()&&\"Notification\"in window&&null!=window.Notification&&null!=window.Notification.permission&&\"granted\"===window.Notification.permission}Ti(){return!this.isPushBlocked()&&this.isPushSupported()&&!this.isPushPermissionGranted()}fn(i,e,t,s,n){i.unsubscribe().then((i=>{i?this.pn(e,t,s,n):(r.D.error(\"Failed to unsubscribe device from push.\"),\"function\"==typeof n&&n(!1))})).catch((i=>{r.D.error(\"Push unsubscription error: \"+i),\"function\"==typeof n&&n(!1)}))}wn(i,e,t){const s=(i=>{if(\"string\"==typeof i)return i;if(0!==i.endpoint.indexOf(\"https://android.googleapis.com/gcm/send\"))return i.endpoint;let e=i.endpoint;return i.bn&&-1===i.endpoint.indexOf(i.bn)&&(e=i.endpoint+\"/\"+i.bn),e})(i);let n=null,r=null;if(null!=i.getKey)try{n=btoa(String.fromCharCode.apply(null,new Uint8Array(i.getKey(\"p256dh\")))),r=btoa(String.fromCharCode.apply(null,new Uint8Array(i.getKey(\"auth\"))))}catch(i){if(\"invalid arguments\"!==i.message)throw i}const o=(i=>{let e;return i.options&&(e=i.options.applicationServerKey)&&e.byteLength&&e.byteLength>0?btoa(String.fromCharCode.apply(null,new Uint8Array(e))).replace(/\\+/g,\"-\").replace(/\\//g,\"_\"):null})(i);this.Pe.gn(s,t,n,r,o),s&&\"function\"==typeof e&&e(s,n,r)}yn(){this.Pe.vn(!0)}Pn(i,e){this.Pe.vn(!1),r.D.info(i),\"function\"==typeof e&&e(!1)}kn(i,e,t,s){if(\"default\"===e.permission)try{window.safari.pushNotification.requestPermission(this.Ve,i,{api_key:this.We,device_id:this.Re.te().id},(e=>{\"granted\"===e.permission&&this.Pe.setPushNotificationSubscriptionType(User.NotificationSubscriptionTypes.OPTED_IN),this.kn(i,e,t,s)}))}catch(i){this.Pn(\"Could not request permission for push: \"+i,s)}else\"denied\"===e.permission?this.Pn(\"The user has blocked notifications from this site, or Safari push is not configured in the Braze dashboard.\",s):\"granted\"===e.permission&&(r.D.info(\"Device successfully subscribed to push.\"),this.wn(e.deviceToken,t,new Date))}Sn(i,e,t){const s=s=>{switch(s){case\"granted\":return void(\"function\"==typeof i&&i());case\"default\":return void(\"function\"==typeof e&&e());case\"denied\":return void(\"function\"==typeof t&&t());default:r.D.error(\"Received unexpected permission result \"+s)}};let n=!1;const o=window.Notification.requestPermission((i=>{n&&s(i)}));o?o.then((i=>{s(i)})):n=!0}pn(i,e,t,s){const n={userVisibleOnly:!0};null!=e&&(n.applicationServerKey=e),i.pushManager.subscribe(n).then((i=>{r.D.info(\"Device successfully subscribed to push.\"),this.wn(i,t,new Date)})).catch((i=>{this.isPushBlocked()?(r.D.info(\"Permission for push notifications was denied.\"),\"function\"==typeof s&&s(!1)):r.D.error(\"Push subscription failed: \"+i)}))}Dn(){return this.Qe?navigator.serviceWorker.getRegistration():navigator.serviceWorker.register(this.Ye).then((()=>navigator.serviceWorker.ready.then((i=>(i&&\"function\"==typeof i.update&&i.update().catch((i=>{r.D.info(\"ServiceWorker update failed: \"+i)})),i)))))}_n(i){this.Qe||(i.unregister(),r.D.info(\"Service worker successfully unregistered.\"))}subscribe(i,e){if(this.isPushSupported()){if(this.Ze){if(!this.Qe&&null!=window.location){let i=this.Ye;-1===i.indexOf(window.location.host)&&(i=window.location.host+i),-1===i.indexOf(window.location.protocol)&&(i=window.location.protocol+\"//\"+i);const e=i.substr(0,i.lastIndexOf(\"/\")+1);if(0!==G.Nn().indexOf(e))return void r.D.error(\"Cannot subscribe to push from a path higher than the service worker location (tried to subscribe from \"+window.location.pathname+\" but service worker is at \"+i+\")\")}if(this.isPushBlocked())return void this.Pn(\"Notifications from this site are blocked. This may be a temporary embargo or a permanent denial.\",e);if(this.wt&&!this.wt.Wn()&&0===this.wt.Gs())return r.D.info(\"Waiting for VAPID key from server config before subscribing to push.\"),void this.wt.An((()=>{this.subscribe(i,e)}));const t=()=>{r.D.info(\"Permission for push notifications was denied.\"),\"function\"==typeof e&&e(!1)},s=()=>{let i=\"Permission for push notifications was ignored.\";this.isPushBlocked()&&(i+=\" The browser has automatically blocked further permission requests for a period (probably 1 week).\"),r.D.info(i),\"function\"==typeof e&&e(!0)},n=this.isPushPermissionGranted(),u=()=>{n||this.Pe.setPushNotificationSubscriptionType(User.NotificationSubscriptionTypes.OPTED_IN),this.Dn().then((t=>{if(null==t)return r.D.error(\"No service worker registration. Set the `manageServiceWorkerExternally` initialization option to false or ensure that your service worker is registered before calling registerPush.\"),void(\"function\"==typeof e&&e());t.pushManager.getSubscription().then((s=>{let n=null;if(this.wt&&null!=this.wt.Wn()&&(n=r.Un.jn(this.wt.Wn())),s){let u=null,h=null;const a=this.h.I(o.q.xn);if(a&&!p(a)){let i;try{i=ei.Rn(a).Tn}catch(e){i=null}null==i||isNaN(i.getTime())||0===i.getTime()||(u=i,h=new Date(u),h.setMonth(u.getMonth()+6))}null!=n&&s.options&&s.options.applicationServerKey&&s.options.applicationServerKey.byteLength&&s.options.applicationServerKey.byteLength>0&&!ii(n,new Uint8Array(s.options.applicationServerKey))?(s.options.applicationServerKey.byteLength>12?r.D.info(\"Device was already subscribed to push using a different VAPID provider, creating new subscription.\"):r.D.info(\"Attempting to upgrade a gcm_sender_id-based push registration to VAPID - depending on the browser this may or may not result in the same gcm_sender_id-based subscription.\"),this.fn(s,t,n,i,e)):s.expirationTime&&new Date(s.expirationTime)<=(new Date).valueOf()?(r.D.info(\"Push subscription is expired, creating new subscription.\"),this.fn(s,t,n,i,e)):a&&p(a)?this.fn(s,t,n,i,e):null==h?(r.D.info(\"No push subscription creation date found, creating new subscription.\"),this.fn(s,t,n,i,e)):h<=(new Date).valueOf()?(r.D.info(\"Push subscription older than 6 months, creating new subscription.\"),this.fn(s,t,n,i,e)):(r.D.info(\"Device already subscribed to push, sending existing subscription to backend.\"),this.wn(s,i,u))}else this.pn(t,n,i,e)})).catch((i=>{r.D.error(\"Error checking current push subscriptions: \"+i)}))})).catch((i=>{r.D.error(\"ServiceWorker registration failed: \"+i)}))};this.Sn(u,s,t)}else if(this.hn){if(null==this.Ke||\"\"===this.Ke)return void r.D.error(\"You must supply the safariWebsitePushId initialization option in order to use registerPush on Safari\");const t=window.safari.pushNotification.permission(this.Ke);this.kn(this.Ke,t,i,e)}}else r.D.info(this.zn)}unsubscribe(i,e){this.isPushSupported()?this.Ze?navigator.serviceWorker.getRegistration().then((t=>{t&&t.pushManager.getSubscription().then((s=>{s&&(this.yn(),s.unsubscribe().then((s=>{s?(r.D.info(\"Device successfully unsubscribed from push.\"),\"function\"==typeof i&&i()):(r.D.error(\"Failed to unsubscribe device from push.\"),\"function\"==typeof e&&e()),this._n(t)})).catch((i=>{r.D.error(\"Push unsubscription error: \"+i),\"function\"==typeof e&&e()})))})).catch((i=>{r.D.error(\"Error unsubscribing from push: \"+i),\"function\"==typeof e&&e()}))})):this.hn&&(this.yn(),r.D.info(\"Device unsubscribed from push.\"),\"function\"==typeof i&&i()):r.D.info(this.zn)}}aa.zn=\"Push notifications are not supported in this browser.\";","import e,{OPTIONS as D}from\"../managers/braze-instance.js\";import aa from\"./push-manager.js\";const or={t:!1,pushManager:null,Br:()=>(or.o(),or.pushManager||(or.pushManager=new aa(e.gr(),e.aa(),e.ce(),e.Js(),e.nn(D.ea),e.nn(D.na),e.ir(),e.nn(D.ra),e.nn(D.ta),e.l())),or.pushManager),o:()=>{or.t||(e.u(or),or.t=!0)},destroy:()=>{or.pushManager=null,or.t=!1}};export default or;"],"names":["aa","constructor","i","e","t","s","n","r","o","u","h","a","this","Pe","We","Re","Ve","Ye","Ke","wt","Qe","Xe","Ze","navigator","ServiceWorkerRegistration","prototype","window","hn","safari","pushNotification","permission","requestPermission","dn","isPushSupported","isPushBlocked","Notification","isPushPermissionGranted","Ti","fn","unsubscribe","then","pn","catch","wn","endpoint","indexOf","bn","getKey","btoa","String","fromCharCode","apply","Uint8Array","message","options","applicationServerKey","byteLength","replace","gn","yn","vn","Pn","kn","api_key","device_id","te","id","setPushNotificationSubscriptionType","deviceToken","Date","Sn","userVisibleOnly","pushManager","subscribe","Dn","serviceWorker","getRegistration","register","ready","update","_n","unregister","location","host","protocol","substr","lastIndexOf","pathname","Wn","Gs","An","getSubscription","I","Tn","isNaN","getTime","setMonth","getMonth","expirationTime","valueOf","zn","or","Br","destroy"],"sourceRoot":""}