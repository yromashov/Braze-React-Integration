{"version":3,"file":"./public/864.bundle.js","mappings":"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","sources":["webpack://braze-web-sdk-tutorial/./node_modules/@braze/web-sdk/src/Feed/feed-provider.js","webpack://braze-web-sdk-tutorial/./node_modules/@braze/web-sdk/src/Feed/feed-provider-factory.js","webpack://braze-web-sdk-tutorial/./node_modules/@braze/web-sdk/src/Feed/feed.js","webpack://braze-web-sdk-tutorial/./node_modules/@braze/web-sdk/src/Feed/request-feed-refresh.js","webpack://braze-web-sdk-tutorial/./node_modules/@braze/web-sdk/src/Feed/ui/show-feed.js","webpack://braze-web-sdk-tutorial/./node_modules/@braze/web-sdk/src/Feed/subscribe-to-feed-updates.js","webpack://braze-web-sdk-tutorial/./node_modules/@braze/web-sdk/src/Feed/log-feed-displayed.js"],"sourcesContent":["import C from\"../common/base-provider.js\";import e from\"../managers/braze-instance.js\";import Feed from\"./feed.js\";import{newCardFromFeedJson as tt,newCardFromSerializedValue as _}from\"../Card/util/card-factory.js\";import{rehydrateDateAfterJsonization as w}from\"../util/date-utils.js\";import{STORAGE_KEYS as o}from\"../managers/storage-manager.js\";import u from\"../managers/subscription-manager.js\";export default class ee extends C{constructor(t,s){super(),this.h=t,this.Is=s,this.vt=new u,e.Ut(this.vt),this.zt()}zt(){const t=this.h.I(o.q.Ks)||[],s=[];for(let i=0;i<t.length;i++){const e=_(t[i]);null!=e&&s.push(e)}this.Xt=s,this.Os=w(this.h.I(o.q.Qs))}Vs(t){const s=[];let i=null;const e=this.h.I(o.q.P)||{},r={};for(let h=0;h<t.length;h++){i=t[h];const o=tt(i);null!=o&&(e[o.id]&&(o.viewed=!0,r[o.id]=!0),s.push(o))}this.h.B(o.q.P,r),this.Xt=s,this.Ss(),this.Os=new Date,this.h.B(o.q.Qs,this.Os)}Ss(){const t=[];for(let s=0;s<this.Xt.length;s++)t.push(this.Xt[s].ss());this.h.B(o.q.Ks,t)}_s(t){null!=t&&t.feed&&(this.zt(),this.Vs(t.feed),this.vt.Nt(new Feed(this.Xt.slice(),this.Os)))}Ws(){this.zt();const t=[],s=new Date;for(let i=0;i<this.Xt.length;i++)(null==this.Xt[i].expiresAt||this.Xt[i].expiresAt>=s)&&t.push(this.Xt[i]);return new Feed(t,this.Os)}Ts(){this.Is.requestFeedRefresh()}Ps(t){return this.vt.Et(t)}clearData(t){null==t&&(t=!1),this.Xt=[],this.Os=null,t&&(this.h.$s(o.q.Ks),this.h.$s(o.q.Qs)),this.vt.Nt(new Feed(this.Xt.slice(),this.Os))}}","import e from\"../managers/braze-instance.js\";import ee from\"./feed-provider.js\";const re={t:!1,provider:null,er:()=>(re.o(),re.provider||(re.provider=new ee(e.l(),e.mr()),e.ar(re.provider)),re.provider),o:()=>{re.t||(e.u(re),re.t=!0)},destroy:()=>{re.provider=null,re.t=!1}};export default re;","import x from\"../common/base-feed.js\";import{logCardClick,logCardImpressions}from\"../Card/index.js\";import{requestFeedRefresh}from\"./request-feed-refresh.js\";export default class Feed extends x{constructor(r,e){super(r,e)}logCardImpressions(r){logCardImpressions(r,!1)}logCardClick(r){logCardClick(r,!1)}sr(){requestFeedRefresh()}dr(){return!1}}","import e from\"../managers/braze-instance.js\";import re from\"./feed-provider-factory.js\";export function requestFeedRefresh(){if(e.rr())return re.er().Ts()}","import e,{OPTIONS as D}from\"../../managers/braze-instance.js\";import{destroyFeedHtml as z,detectFeedImpressions as T,feedToHtml as N,LAST_REQUESTED_REFRESH_DATA_ATTRIBUTE as q,refreshFeed as I,registerFeedSubscriptionId as L,updateFeedCards as M}from\"../../common/feed-display.js\";import{Feed,logFeedDisplayed,subscribeToFeedUpdates}from\"../index.js\";import re from\"../feed-provider-factory.js\";import{intersection as te}from\"../../util/code-utils.js\";import{setCardHeight as $}from\"../../Card/display/card-display.js\";import{setupFeedUI as k}from\"../../ui/js/index.js\";import r from\"../../../shared-lib/braze-shared-lib.js\";export function showFeed(t,n,o){if(!e.rr())return;k();const s=(e,t)=>{if(null==t)return e;const n=[];for(let e=0;e<t.length;e++)n.push(t[e].toLowerCase());const o=[];for(let t=0;t<e.length;t++){const r=[];for(let n=0;n<e[t].categories.length;n++)r.push(e[t].categories[n].toLowerCase());te(r,n).length>0&&o.push(e[t])}return o},i=e.nn(D.tn)||e.nn(D.en)||!1;let l=!1;null==t&&(t=document.body,l=!0);let a=!1,f=null;null==n?(f=re.er().Ws(),M(f,s(f.cards,o),f.lastUpdated,null,i),a=!0):f=new Feed(s(n,o),new Date);const u=N(f,i);if(a){(null==f.lastUpdated||(new Date).valueOf()-f.lastUpdated.valueOf()>Feed.ur)&&(r.D.info(`Cached feed was older than max TTL of ${Feed.ur} ms, requesting an update from the server.`),I(f,u));const e=(new Date).valueOf(),t=subscribeToFeedUpdates((function(t){const n=u.querySelectorAll(\".ab-refresh-button\")[0];if(null!=n){let t=500;const o=parseInt(u.getAttribute(q));isNaN(o)?t-=(new Date).valueOf()-e:t-=(new Date).valueOf()-o,setTimeout((function(){n.className=n.className.replace(/fa-spin/g,\"\")}),Math.max(t,0))}M(f,s(t.cards,o),t.lastUpdated,u,i)}));L(t,u)}const m=e=>{const t=e.querySelectorAll(\".ab-feed\");let n=null;for(let o=0;o<t.length;o++)t[o].parentNode===e&&(n=t[o]);null!=n?(z(n),n.parentNode.replaceChild(u,n)):e.appendChild(u),setTimeout((function(){u.className=u.className.replace(\"ab-hide\",\"ab-show\")}),0),l&&u.focus(),logFeedDisplayed(),T(f,u),$(f.cards,e)};var c;null!=t?m(t):window.onload=(c=window.onload,function(){\"function\"==typeof c&&c(),m(document.body)})}","import e from\"../managers/braze-instance.js\";import re from\"./feed-provider-factory.js\";export function subscribeToFeedUpdates(r){if(e.rr())return re.er().Ps(r)}","import e from\"../managers/braze-instance.js\";import r from\"../../shared-lib/braze-shared-lib.js\";export function logFeedDisplayed(){if(e.rr())return e.nr().yr(r.qr.Fr).S}"],"names":["ee","constructor","t","s","super","this","h","Is","vt","zt","I","i","length","e","push","Xt","Os","Vs","r","o","id","viewed","B","Ss","Date","ss","_s","feed","Nt","Feed","slice","Ws","expiresAt","Ts","requestFeedRefresh","Ps","Et","clearData","$s","re","provider","er","destroy","logCardImpressions","logCardClick","sr","dr","showFeed","n","toLowerCase","categories","l","document","body","a","f","cards","lastUpdated","u","valueOf","ur","querySelectorAll","parseInt","getAttribute","isNaN","setTimeout","className","replace","Math","max","subscribeToFeedUpdates","m","parentNode","replaceChild","appendChild","focus","yr","S","c","window","onload"],"sourceRoot":""}